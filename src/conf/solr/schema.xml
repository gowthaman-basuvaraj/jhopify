<?xml version="1.0" ?>
<schema name="Jhopify Solr Schema" version="1.0">
	<types>
		<fieldtype name="string"	class="solr.StrField" 		sortMissingLast="true" omitNorms="true"/>
		<fieldtype name="tags"  	class="solr.TextField" 		sortMissingLast="true" omitNorms="true">
			<analyzer>
				<filter		class="solr.LowerCaseFilterFactory" />
				<filter 	class="solr.PatternReplaceFilterFactory" pattern="(\w+)'(\w+)" 	replacement="$1$2" 	replace="all" />
				<tokenizer	class="solr.StandardTokenizerFactory" />
				<filter 	class="solr.StopFilterFactory" words="stopwords.txt" ignoreCase="true" />
			</analyzer>
		</fieldtype>
		<fieldtype name="sizeString"  	class="solr.TextField" 		sortMissingLast="true" omitNorms="true">
			<analyzer>
				<filter 	class="solr.PatternReplaceFilterFactory" pattern="([A-Z]+)/([A-Z]+)" replacement="$1" 	replace="all" />
				<tokenizer	class="solr.StandardTokenizerFactory" />
			</analyzer>
		</fieldtype>
		<fieldtype name="integer"  	class="solr.StrField" 		sortMissingLast="true"	omitNorms="true"/>
		<fieldType name="float"		class="solr.TrieFloatField"	sortMissingLast="true"	omitNorms="true" precisionStep="0"	positionIncrementGap="0"/>
		<fieldtype name="money"  	class="solr.TrieFloatField" sortMissingLast="true"	omitNorms="true" precisionStep="8"	positionIncrementGap="0"/>
	</types>

	<fields>
		<field name="handle"      							type="string"   	indexed="true"  stored="true"  multiValued="false" required="true"/>

		<field name="id"      								type="string"   	indexed="true" 	stored="true"  multiValued="false" required="false"/>
		<field name="productType"      						type="string"   	indexed="true" 	stored="true"  multiValued="false" required="false"/>
		<field name="vendor"      							type="string"   	indexed="true"  stored="true"  multiValued="false" required="false"/>
		<field name="title"      							type="string"   	indexed="true" 	stored="true"  multiValued="false" required="false"/>
		<field name="tags"      							type="tags"   		indexed="true"  stored="true"  multiValued="false" required="false"/>
		<field name="bodyHtml"      						type="string"  		indexed="false" stored="false" multiValued="false" required="false"/>

		<field name="optionName"      						type="string"   	indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="imageName"      						type="string"   	indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="imageSRC"      						type="string"  		indexed="false" stored="true"  multiValued="true"  required="false"/>

		<field name="variantId"      						type="string"   	indexed="true" 	stored="true"  multiValued="true"  required="false"/>
		<field name="variantTitle"      					type="string"  	 	indexed="true" 	stored="true"  multiValued="true"  required="false"/>
		<field name="variantPosition"      					type="integer"  	indexed="true" 	stored="true"  multiValued="true"  required="false"/>
		<field name="variantPrice"      					type="money"   		indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantDiscount"		 				type="integer"  	indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantCompareAtPrice" 				type="money"  		indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantInventoryQuantity"  			type="integer"  	indexed="true" 	stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption1Value"      				type="tags"   		indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption2Value"      				type="sizeString"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption3Value"      				type="string"   	indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantSKU"      						type="string"   	indexed="true" 	stored="true"  multiValued="true"  required="false"/>
		
		<dynamicField name="*_metafield_integer"			type="integer"		indexed="true"	stored="true"  multiValued="false" required="false"/>
		<dynamicField name="*_metafield_string"				type="string"		indexed="true"	stored="true"  multiValued="false" required="false"/>
		<dynamicField name="*_variantMetafield_integer"		type="integer"		indexed="true"	stored="true"  multiValued="true"  required="false"/>
		<dynamicField name="*_variantMetafield_string"		type="string"		indexed="true"	stored="true"  multiValued="true"  required="false"/>
 	</fields>

 	<!-- field to use to determine and enforce document uniqueness. -->
 	<uniqueKey>handle</uniqueKey>
</schema>