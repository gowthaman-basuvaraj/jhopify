<?xml version="1.0" ?>
<schema name="English Jhopify Schema" version="1.0">
	<types>
		<fieldtype name="string"	class="solr.StrField" 		sortMissingLast="true" omitNorms="true"/>
		<fieldtype name="tags"  	class="solr.TextField" 		sortMissingLast="true" omitNorms="true">
			<analyzer>
				<filter		class="solr.LowerCaseFilterFactory"/>
				<tokenizer	class="solr.PatternTokenizerFactory"	pattern="[,\s-]*" />
			</analyzer>
		</fieldtype>
		<fieldtype name="integer"  	class="solr.StrField" 		sortMissingLast="true"	omitNorms="true"/>
		<fieldType name="float"		class="solr.TrieFloatField"	precisionStep="0"		omitNorms="true" positionIncrementGap="0"/>
		<fieldtype name="money"  	class="solr.TrieFloatField" sortMissingLast="true"	omitNorms="true" precisionStep="8" positionIncrementGap="0"/>
		<fieldtype name="text" 		class="solr.TextField" 		positionIncrementGap="100">
			<analyzer type="index">
				<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
				<tokenizer 	class="solr.HTMLStripWhitespaceTokenizerFactory"/>
				<filter 	class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
				<filter 	class="solr.StandardFilterFactory"/>
			  	<filter 	class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
			  	<filter 	class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1" preserveOriginal="1"/>
				<filter 	class="solr.LowerCaseFilterFactory"/>
				<filter 	class="solr.SnowballPorterFilterFactory" language="English"/>
			</analyzer>
			<analyzer type="query">
				<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
				<tokenizer	class="solr.WhitespaceTokenizerFactory"/>
			  	<filter 	class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
			  	<filter 	class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1" preserveOriginal="1"/>
				<filter 	class="solr.LowerCaseFilterFactory"/>
				<filter 	class="solr.SnowballPorterFilterFactory" language="English"/>
			</analyzer>
      </fieldtype>
	</types>

	<fields>
		<field name="handle"      							type="string"   indexed="true"  stored="true"  multiValued="false" required="true"/>

		<field name="id"      								type="string"   indexed="false" stored="true"  multiValued="false" required="false"/>
		<field name="productType"      						type="string"   indexed="false" stored="true"  multiValued="false" required="false"/>
		<field name="vendor"      							type="string"   indexed="true"  stored="true"  multiValued="false" required="false"/>
		<field name="title"      							type="string"   indexed="false" stored="true"  multiValued="false" required="false"/>
		<field name="tags"      							type="tags"   	indexed="true"  stored="true"  multiValued="false" required="false"/>
		<field name="bodyHtml"      						type="string"   indexed="false" stored="false" multiValued="false" required="false"/>

		<field name="optionName"      						type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="imageName"      						type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="imageSRC"      						type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>

		<field name="variantId"      						type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="variantTitle"      					type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="variantPosition"      					type="integer"  indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="variantPrice"      					type="money"   	indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantDiscount"		 				type="integer"  indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantCompareAtPrice" 				type="money"  	indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantInventoryQuantity"  			type="integer"  indexed="true" 	stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption1Value"      				type="text"   	indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption2Value"      				type="string"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption3Value"      				type="string"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantSKU"      						type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>

		<field name="text"									type="text"   	indexed="true"  stored="false" multiValued="true"  required="false"/>
		
		<dynamicField name="*_metafield_integer"			type="integer"	indexed="true"	stored="true"  multiValued="false" required="false"/>
		<dynamicField name="*_metafield_string"				type="string"	indexed="true"	stored="true"  multiValued="false" required="false"/>
		<dynamicField name="*_variantMetafield_integer"		type="integer"	indexed="true"	stored="true"  multiValued="true"  required="false"/>
		<dynamicField name="*_variantMetafield_string"		type="string"	indexed="true"	stored="true"  multiValued="true"  required="false"/>
 	</fields>

 	<!-- field to use to determine and enforce document uniqueness. -->
 	<uniqueKey>handle</uniqueKey>

 	<!-- field for the QueryParser to use when an explicit fieldname is absent -->
 	<defaultSearchField>text</defaultSearchField>

 	<!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
 	<solrQueryParser defaultOperator="OR"/>

 	<!-- Copy fields into "full" text default field -->
 	<copyField source="*" dest="text"/>
</schema>