<?xml version="1.0" ?>
<schema name="English Jhopify Schema" version="1.0">
	<types>
		<fieldtype name="string"	class="solr.StrField" 		sortMissingLast="true" omitNorms="true"/>
		<fieldtype name="tags"  	class="solr.StrField" 		sortMissingLast="true" omitNorms="true">
			<analyzer>
				<tokenizer class="solr.PatternTokenizerFactory" pattern=", *" />
			</analyzer>
		</fieldtype>
		<fieldtype name="html"  	class="solr.StrField" 		sortMissingLast="true" omitNorms="true"/>
		<fieldtype name="integer"  	class="solr.StrField" 		sortMissingLast="true" omitNorms="true"/>
		<fieldtype name="money"  	class="solr.TrieFloatField" sortMissingLast="true" omitNorms="true" precisionStep="8" positionIncrementGap="0"/>
		<fieldtype name="text" 		class="solr.TextField" 		positionIncrementGap="100">
			<analyzer type="index">
				<charFilter class="solr.HTMLStripCharFilterFactory"/>
				<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
			  	<tokenizer class="solr.WhitespaceTokenizerFactory"/>
				<!-- Case insensitive stop word removal.
				add enablePositionIncrements=true in both the index and query
				analyzers to leave a 'gap' for more accurate phrase queries.
				-->
			  	<filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
			  	<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" 
			  		catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
				<filter class="solr.LowerCaseFilterFactory"/>
				<filter class="solr.SnowballPorterFilterFactory" language="English"/>
			</analyzer>
			<analyzer type="query">
        		<charFilter class="solr.MappingCharFilterFactory" mapping="mapping-ISOLatin1Accent.txt"/>
				<tokenizer class="solr.WhitespaceTokenizerFactory"/>
				<filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
				<filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
				<filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0"
					catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
				<filter class="solr.LowerCaseFilterFactory"/>
				<filter class="solr.SnowballPorterFilterFactory" language="English"/>
			</analyzer>
      </fieldtype>
	</types>

	<fields>
		<field name="handle"      					type="string"   indexed="true"  stored="true"  multiValued="false" required="true"/>

		<field name="id"      						type="string"   indexed="false" stored="true"  multiValued="false" required="false"/>
		<field name="productType"      				type="string"   indexed="true"  stored="true"  multiValued="false" required="false"/>
		<field name="vendor"      					type="string"   indexed="true"  stored="true"  multiValued="false" required="false"/>
		<field name="title"      					type="string"   indexed="true"  stored="true"  multiValued="false" required="false"/>
		<field name="tags"      					type="tags"   	indexed="true"  stored="true"  multiValued="false" required="false"/>
		<field name="bodyHtml"      				type="text"   	indexed="true" 	stored="true"  multiValued="false" required="false"/>

		<field name="imageName"      				type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="metafieldKey"      			type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="metafieldValue"    			type="string"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="imageSRC"      				type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>

		<field name="variantId"      				type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="variantTitle"      			type="string"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantPosition"      			type="integer"  indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="variantPrice"      			type="money"   	indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantCompareAtPrice" 		type="money"  	indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantInventoryQuantity"  	type="integer"  indexed="true" 	stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption1Value"      		type="string"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption2Value"      		type="string"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantOption3Value"      		type="string"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantSKU"      				type="string"   indexed="true"  stored="true"  multiValued="true"  required="false"/>
		<field name="variantFirstMetafieldKey"  	type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>
		<field name="variantFirstMetafieldValue"	type="string"   indexed="false" stored="true"  multiValued="true"  required="false"/>

		<field name="text"							type="text"   	indexed="true"  stored="false" multiValued="true"  required="false"/>
 	</fields>

 	<!-- field to use to determine and enforce document uniqueness. -->
 	<uniqueKey>handle</uniqueKey>

 	<!-- field for the QueryParser to use when an explicit fieldname is absent -->
 	<defaultSearchField>text</defaultSearchField>

 	<!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
 	<solrQueryParser defaultOperator="OR"/>

 	<!-- Copy fields into "full" text default field -->
 	<copyField source="handle" dest="text"/>
 	<copyField source="productType" dest="text"/>
 	<copyField source="vendor" dest="text"/>
 	<copyField source="title" dest="text"/>
 	<copyField source="tags" dest="text"/>
 	<copyField source="bodyHtml" dest="text"/>
 	<copyField source="metafieldValue" dest="text"/>
 	<copyField source="variantTitle" dest="text"/>
 	<copyField source="variantOption1Value" dest="text"/>
 	<copyField source="variantOption2Value" dest="text"/>
 	<copyField source="variantOption3Value" dest="text"/>
 	<copyField source="variantSKU" dest="text"/>
</schema>